/*!
 * Copyright(c) 2014. M2SOFT Co., Ltd. All source codes cannot be copied without permission.
 * 
 * @version: 0.2.0.26
 * @bulid date: 2016/01/08 08:09
 */
var crownix=crownix||{};crownix.ns=function(e){var d=e.split("."),c=crownix;if(d[0]==="crownix"){d=d.slice(1)}for(var b=0,a=d.length;b<a;b++){if(typeof c[d[b]]==="undefined"){c[d[b]]={}}c=c[d[b]]}return c};crownix.ns("crownix.chart.util.Util");var Util=crownix.chart.util.Util;Util.toAbsAngle=function(a){return(a%360)<0?360+(a%360):(a%360)};Util.browser=(function(){var b=navigator.userAgent,a,c=b.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(c[1])){a=/\brv[ :]+(\d+)/g.exec(b)||[];return{name:"IE",version:(a[1]||"")}}if(c[1]==="Chrome"){a=b.match(/\bOPR\/(\d+)/);if(a!=null){return{name:"Opera",version:a[1]}}}c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"];if((a=b.match(/version\/(\d+)/i))!=null){c.splice(1,1,a[1])}return{name:c[0],version:c[1]}})();Util.isNumeric=function(a){return a-parseFloat(a)>=0};crownix.ns("crownix.chart.util.Path");(function(){var a=crownix.chart.util.Path;var c=crownix.chart.util.Util;a.TOP=1;a.BOTTOM=2;a.RIGHT=3;a.DOWN=4;var b=function(d){return(d%2)===1?0.5:0};a.vBar=function(g,d,h,e,f){return g.path(["M",d-f/2,h,"v",e-h,"h",f,"v",-(e-h),"z"].join())};a.hBar=function(g,d,h,f,e){return g.path(["M",f,h-e/2,"v",e,"h",d-f,"v",-e,"z"].join())};a.lineto=function(g,d,h,f,e){return g.path(["M",d+0.5,h+0.5,"l",f,e].join())};a.lineTo=function(g,d,h,f,e){return g.path(["M",d+0.5,h+0.5,"L",f+0.5,e+0.5].join())};a.piePath=function(k,i,d,p,l,g){var m=Math.PI/180,j=g?1:0,h=k+Math.cos((p-90)*m)*d,o=i+Math.sin((p-90)*m)*d,f=k+Math.cos((l-90)*m)*d,n=i+Math.sin((l-90)*m)*d;return["M",k,i,"L",h,o,"A",d,d,0,+(l-p>180),j,f,n,"z"].join()};a.pie=function(j,d,k,h,g,i,f){return j.path(a.piePath(d,k,h,g,i,f))};a.pie3D=function(k,g,f,p,u,t,i,h,C){var B=Math.PI/180,w=1,n=u-90,z=t-90,j=+(z-n>180);C=C-C*(90-h)/90,rx=p,ry=p*(90-h)/90,irx=rx*i/100,iry=ry*i/100,x1=g+Math.cos(n*B)*rx,y1=f+Math.sin(n*B)*ry,x2=g+Math.cos(z*B)*rx,y2=f+Math.sin(z*B)*ry,x3=g+Math.cos(z*B)*irx,y3=f+Math.sin(z*B)*iry,x4=g+Math.cos(n*B)*irx,y4=f+Math.sin(n*B)*iry,ix360=g+irx,ix180=g-irx,x360=g+rx,x180=g-rx;var v=function(){return k.path(["M",x1,y1,"L",x1,y1-C,"L",x4,y4-C,"L",x4,y4,"z"]).data({position:"start"})};var m=function(){return k.path(["M",x2,y2,"L",x2,y2-C,"L",x3,y3-C,"L",x3,y3,"z"]).data({position:"end"})};var q=function(G,F,s,E,r,D,e){return k.path(["M",s,E,"A",G,F,0,0,1,r,D,"L",r,D-C,"A",G,F,0,0,0,s,E-C,"z"]).data({position:e})};var l=function(){var e=["M",x1,y1-C,"A",rx,ry,0,+(z-n>180),1,x2,y2-C,"L",x3,y3-C,];if(i>0){e.push("A",irx,iry,0,+(z-n>180),0,x4,y4-C)}e.push("z");k.path(e)};k.setStart();if(h>0){var o=c.toAbsAngle(n);var A=c.toAbsAngle(z);var d=function(){if(Math.abs(180-c.toAbsAngle(u))<Math.abs(180-c.toAbsAngle(t))){m();v()}else{v();m()}};if(o<180){if(A>180){q(rx,ry,x180,f,x2,y2,"end");m();q(irx,iry,ix180,f,x3,y3,"end");q(irx,iry,x4,y4,ix180,f,"start");v();q(rx,ry,x1,y1,x180,f,"start")}else{if(A<o){q(rx,ry,x180,f,x360,f,"middle");q(irx,iry,ix180,f,ix360,f,"middle");q(irx,iry,x4,y4,ix180,f,"start");q(irx,iry,ix360,f,x3,y3,"end");d();q(rx,ry,x1,y1,x180,f,"start");q(rx,ry,x360,f,x2,y2,"end")}else{q(irx,iry,x4,y4,x3,y3);d();q(rx,ry,x1,y1,x2,y2)}}}else{if(A<180){q(rx,ry,x1,y1,x360,f,"start");v();q(irx,iry,x4,y4,ix360,f,"start");q(irx,iry,ix360,f,x3,y3,"end");m();q(rx,ry,x360,f,x2,y2,"end")}else{if(A<o){q(rx,ry,x1,y1,x360,f,"start");q(rx,ry,x180,f,x2,y2,"end");d();q(irx,iry,x4,y4,ix360,f,"start");q(irx,iry,ix180,f,x3,y3,"end");q(irx,iry,ix360,f,ix180,f,"middle");q(rx,ry,x360,f,x180,f,"middle")}else{q(rx,ry,x1,y1,x2,y2);d();q(irx,iry,x4,y4,x3,y3)}}}}l();return k.setFinish()};a.square=function(f,d,g,e){return f.rect(d-e,g-e,e*2,e*2)};a.diamond=function(f,d,g,e){return f.path(["M",d,g-e,"L",d-e,g,"L",d,g+e,"L",d+e,g,"z"].join())};a.triangle=function(f,d,g,e){return f.path(["M",d,g-e,"L",d-e,g+e,"L",d+e,g+e,"z"].join())};a.triangle_down=function(f,d,g,e){return f.path(["M",d,g+e,"L",d+e,g-e,"L",d-e,g-e,"z"].join())}})();crownix.ns("crownix.chart.util.Format");(function(){var g=crownix.chart.util.Util,d=crownix.chart.util.Format;var f,h,a,c;var e=function(i){switch(i){case"name":if(a){return a}else{return f}case"label":if(label){return label}else{return f}case"percent":if(c){return c}else{return f}case"value":default:return f}};var b=function(k){var i,j=/{[value|percent|name|label]+(:0[0,.]*0)?}/;i=j.exec(k);return i!=null?i[0]:undefined};d.convert=function(i,l){f=i.value;h=i.label;a=i.name;c=i.percentValue;var p=l.format,n=l.formatter;if(l.format==undefined){p=i.value}else{var j=b(p);while(j){var k,m,o;if(j.indexOf(":")>=0){k=j.substr(1,j.length-2).split(":")[0];m=j.substr(1,j.length-2).split(":")[1]}else{k=j.substr(1,j.length-2)}o=e(k);if(o.toString().indexOf(".")>=0&&!m){m="0.00"}if(g.isNumeric(o)&&m){o=numeral(o).format(m)}p=p.replace(j,o);j=b(p)}}if(typeof n=="function"){i.formatValue=p;p=n.call(i)}return p}})();crownix.ns("crownix.chart.options");crownix.chart.options.DEFAULT={type:"line",inverted:false,chart:{borderWidth:0,borderColor:"#C0D0E0",borderRadius:0,marginTop:10,marginRight:10,marginLeft:10,marginBottom:10,backgroundImage:undefined,backgroundColor:undefined,},title:{text:undefined,font:{family:undefined,size:20,color:"#3B444B",weight:"bold",},position:"top",align:"center",rotation:0},axisX:{data:[],opposite:false,lineColor:"#C0D0E0",lineWidth:1,labels:{format:undefined,formatter:undefined,rotation:0},title:{enable:false,text:undefined,align:"center",font:{family:"Arial",size:14,color:"#3B444B",weight:"bold"},rotation:0},},axisY:{opposite:false,lineColor:"#C0D0E0",lineWidth:0,type:"auto",min:undefined,max:undefined,tickAmount:undefined,tickInterval:undefined,labels:{format:undefined,formatter:undefined,rotation:0},title:{enable:false,text:undefined,align:"center",font:{family:"Arial",size:14,color:"#3B444B",weight:"bold"},rotation:0},},legend:{enable:true,layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,borderColor:"#000000",floating:false,font:{family:"Arial",size:12,color:"#171717",weight:"normal"},format:undefined,formatter:undefined,x:0,y:0},common:{column:{type:"side",}}};crownix.chart.options.SERIES_DEFAULT={dataLabels:{enable:false,font:{family:undefined,size:12,color:"#131313",weight:"normal",},format:undefined,formatter:undefined},tooltip:{enable:true,font:{family:undefined,size:12,color:"#131313",weight:"normal",}},animation:true,data:[],name:undefined,axisX:0,axisY:0,axisX2:undefined};crownix.chart.options.LINE_DEFAULT={color:undefined,lineWidth:3,lineType:"normal",step:"left",symbol:"circle",symbolSize:5};crownix.chart.options.BAR_DEFAULT={color:undefined,};crownix.chart.options.PIE_DEFAULT={radius:undefined,center:undefined,startAngle:0,clockwise:true,innerPercent:0,slice:true,sliceOffset:10,options3d:{enable:false,alpha:45,depth:50,},showLegend:false};crownix.ns("crownix.chart.Tooltip");crownix.chart.Tooltip=function(f){var f=f,d,c,e;var b=function(){f.setStart();d=f.path();c=f.text();e=f.setFinish()};var a=function(h,g){var i;if(g=="T"){i=["M",0,0,"l",6,-8,"l",h.width/2-6+10,0,"l",0,-h.height-10,"l",-h.width-20,0,"l",0,h.height+10,"l",h.width/2-6+10,0,"z"]}else{if(g=="B"){i=["M",0,0,"l",6,8,"l",h.width/2-6+10,0,"l",0,h.height+10,"l",-h.width-20,0,"l",0,-h.height-10,"l",h.width/2-6+10,0,"z"]}else{if(g=="L"){i=["M",0,0,"l",-8,-6,"l",0,-h.height/2+6-4,"l",-h.width-10,0,"l",0,h.height+8,"l",h.width+10,0,"l",0,-h.height/2+6-4,"z"]}else{i=["M",0,0,"l",8,-6,"l",0,-h.height/2+6-4,"l",h.width+10,0,"l",0,h.height+8,"l",-h.width-10,0,"l",0,-h.height/2+6-4,"z"]}}}return i};this.show=function(n,l,o,k,h,m){var m=m||"T";if(!e){b()}if(o!=undefined){c.textAttr(k).attr({text:o,});var j=c.getBBox(),i,g;if(m=="T"){i=0;g=-8-j.height/2-5}else{if(m=="B"){i=0;g=8+j.height/2+5}else{if(m=="L"){i=-8-j.width/2-5;g=0}else{i=8+j.width/2+5;g=0}}}c.attr({x:i,y:g});d.attr({path:a(j,m)}).attr(h)}e.transform(["t",n,l].join()).attr({opacity:1})};this.hide=function(){if(e){e.transform("t0,0").attr({opacity:0})}}};crownix.ns("crownix.chart.Layout");(function(){crownix.chart.Layout=function(b,d){var d=d;var b=b;var a=["#77B5FE","#71BC78","#966FD6","#FF7F50","#48B7A7","#D26A8B","#F7DC6F","#779ECB","#FFB347","#999999","#B5A642","#5D8AA8","#A93226","#884EA0","#2471A3","#138D75","#D68910","#D0D3D4","#2E4053"];var h=0;var i={top:d.chart.marginTop,right:Math.floor(b.width)-d.chart.marginRight,bottom:Math.floor(b.height)-d.chart.marginBottom,left:d.chart.marginLeft,};var c=[],f=0,g=0,e=[];this.getSeriesDemension=function(l){var k=Math.floor(l.width);var j=Math.floor(l.height);return{top:d.chart.marginTop,right:k-d.chart.marginRight,bottom:j-d.chart.marginBottom,left:d.chart.marginLeft,}};this.getArea=function(){return i};this.addArea=function(j,k){switch(j){case"T":case"top":i.top=i.top+k.height+15;break;case"L":case"left":i.left=i.left+k.width+15;break;case"B":case"bottom":i.bottom=i.bottom-k.height-15;break;case"R":case"right":i.right=i.right-k.width-15;break}return i};this.nextColor=function(){return a[h++%a.length]};this.setSeries=function(l){var k=l.getType(),j=l.isXYChart();if(j&&k=="bar"){f++}};this.getColumnCount=function(){return f};this.getColumnIndex=function(){return g};this.addColumnIndex=function(){g++}}})();crownix.ns("crownix.chart.Series");(function(){crownix.chart.Series=function(l,f,w,i){var v=crownix.chart.util.Path;var e=crownix.chart.type.Bar;var q=crownix.chart.type.Line;var u=crownix.chart.type.Pie;var h=crownix.chart.util.Format;var m=function(B,C){if(C=="pie"){return"circle"}else{if(C=="bar"){return"square"}else{return B.symbol}}};var A=function(E,G,F,C){if(F=="pie"){var H=[];for(var D=0,B=E.data.length;D<B;D++){H.push(E.data[D].name||"Sector "+(D+1))}return H}else{if(F!="pie"){return[E.name||"Series "+(C+1)]}}};var j=function(E,G,F){if(F=="pie"){var C=[];for(var D=0,B=E.data.length;D<B;D++){C.push(E.data[D].color||G.nextColor())}return C}else{return[E.color||G.nextColor()]}};var l=$.extend(true,{},crownix.chart.options.SERIES_DEFAULT,l),z=l.data,g=l.type||f.type,d=m(l,g),n=A(l,w,g,i),k=j(l,w,g),p=l.axisX,r=l.axisY,a=l.axisX2,c,b,o=Math.min.apply(Math,z),t=Math.max.apply(Math,z),f=f,s=l.showLegend||false;this.getData=function(){return z};this.getType=function(){return g};this.getAxisXIndex=function(){return p};this.getAxisYIndex=function(){return r};this.getAxisX2Index=function(){return a};this.setAxisX=function(B){this.axisX=B};this.setAxisY=function(B){this.axisY=B};this.getAxisX=function(){return c};this.getAxisY=function(){return b};this.getMinValue=function(){return o};this.getMaxValue=function(){return t};this.isXYChart=function(){return(g=="line"||g=="bar")};this.getName=function(B){if(B!=undefined){return n[B]}else{return n}};this.getShape=function(){return d};this.getColor=function(B){if(B!=undefined){return k[B]}else{return k}};this.showLegend=function(){return s};this.getLegendLabels=function(C){if(f.legend.format==undefined){return this.getName(C)}var B={};if(this.getType()=="pie"){B.name=l.data[C].name;B.value=l.data[C].value}else{B.name=l.name;B.value=""}return h.convert(B,f.legend)};this.draw=function(D,C){var B;if(g=="bar"){B=new e(D,C,f)}else{if(g=="line"){B=new q(D,C,f)}else{if(g=="pie"){B=new u(D,C,f)}}}B.draw(l,this.getColor(),this.axisX,this.axisY)}}})();crownix.ns("crownix.chart.Legend");(function(){crownix.chart.Legend=function(b,w,s){var A=crownix.chart.util.Path;var b=b,w=w,F=s.x,E=s.y,a=b.width,d=b.height,r=a,J=d;var B=s.layout,I=s.align,g=s.verticalAlign,h=s.borderWidth,z=s.borderColor,p=s.floating,t={"text-anchor":"start","font-size":s.font.size,"font-family":s.font.family,fill:s.font.color,"font-weight":s.font.weight,},v=s.format,i=s.formatter;var L=0,u=5,N=5,j=5,K=5,C=false,k=5,G=5;var m=[],q,n,D,f;var H=function(T,O,U,R,S,P){var Q;switch(S){case"diamond":Q=A.diamond(T,O,U,R);break;case"square":Q=A.square(T,O,U,R);break;case"triangle":Q=A.triangle(T,O,U,R);break;case"triangle_down":Q=A.triangle_down(T,O,U,R);break;default:Q=T.circle(O,U,R)}return Q.attr({stroke:"none",fill:P,opacity:1,})};var l=function(Q){var Y=F,X=E,Z=Q.set(),U=Q.set();if(typeof Y=="string"&&typeof X=="string"&&Y.charAt(Y.length-1)=="%"&&X.charAt(X.length-1)=="%"){Y=Q.width*parseInt(Y)/100;X=Q.height*parseInt(X)/100}for(var W in m){var S=m[W].symbol,aa=m[W].text,T=m[W].color;var R=5;var O=Q.set(),P=H(Q,Y,X+N,R,S,T),V=Q.text(Y+R+k,X+N,aa).textAttr(t);O.push(P,V);if(!L){L=O.getBBox().height}if(B=="horizontal"){Y+=(O.getBBox().width)+u;U.push(O);if(U.getBBox().width+O.getBBox().width+(K*3)>(r-K*2)){Z.push(U);U=Q.set();Y=F;X=E+L+j}}else{X+=L+j;Z.push(O)}}if(U.length>0){Z.push(U)}return Z};var M=function(T){var V=T.set(),S=n.getBBox();if(S.height>J*0.8){C=true}var O=S.x-G,U=S.y-G-N,P=S.width+(G*2),Q=S.height+(G*2)+N+j;if(C){Q=Math.floor((J*0.8)/(L+N+j))*(L+N+j)+N+j}var R=T.rect(O,U,P,Q,0).attr({stroke:z,"stroke-width":h,});V.push(R);return V};var e=function(P){var Z=P.set,U=q.getBBox();var O=P.set(),Y=U.x,X=U.y,aa=U.width,R=J*0.8,W=1,Q=Math.ceil(n.getBBox().height/(Math.floor((J*0.8)/(L+N+j))*(L+N+j))),T={};var ab=function(ac){var ad=Math.floor((J*0.8)/(L+N+j))*(L+N+j),af=Math.round(n.getBBox().x)-4,ae;if(ac){W--;ae=Math.round(n.getBBox().y)-14+ad}else{W++;ae=Math.round(n.getBBox().y)-ad}T.attr({text:W+" / "+Q});n.animate({transform:"t"+af+","+ae,"clip-rect":[0,ad*(W-1),aa,ad],},500,"linear")};var V=H(P,Y+10,X+R+10,5,"triangle","black"),S=H(P,Y+30,X+R+10,5,"triangle_down","black");T=P.text(Y+50,X+R+10,W+" / "+Q).textAttr(t);V.click(function(ac){if(W!=1){ab(true)}});S.click(function(ac){if(W!=Q){ab(false)}});O.push(V);O.push(S);O.push(T);return O};var c=function(R,Q,P){var O;if(p){if(I=="left"){O=K+G+1}else{if(I=="right"){O=b.width+K+G-Q-3}else{O=b.width/2+K+G-Q/2}}}else{if(I=="left"){if(B=="vertical"||g=="middle"){O=R.left+(K+G)-Q-P}else{O=R.left+(K+G)}}else{if(I=="right"){if(B=="vertical"||g=="middle"){O=R.right+K+G+P}else{O=R.right+(K+G)-Q}}else{O=R.left+(R.right-R.left)/2+K+G-Q/2}}}return O};var o=function(Q,P,O){var R;if(p){if(g=="top"){R=K+G+2}else{if(g=="bottom"){R=b.height+K+G-P-1}else{R=b.height/2+K+G-P/2}}}else{if(g=="top"){if(B=="horizontal"||I=="center"){R=Q.top+(K+G)-P-O}else{R=Q.top+(K+G)}}else{if(g=="bottom"){if(B=="horizontal"||I=="center"){R=Q.bottom+K+G+O}else{R=Q.bottom-(K+G)-P}}else{R=Q.top+(Q.bottom-Q.top)/2+K+G-P/2}}}return R};this.add=function(P){if(P.getType()!="pie"){if(P.getLegendLabels(0)==""){return}m.push({symbol:P.getShape(),text:P.getLegendLabels(0),color:P.getColor(0)?P.getColor(0):"#000000"})}else{if(P.getType()=="pie"&&P.showLegend()){for(var O=0;O<P.getName().length;O++){if(P.getLegendLabels(O)==""){continue}m.push({symbol:P.getShape(),text:P.getLegendLabels(O),color:P.getColor(O)?P.getColor(O):"#000000"})}}}};this.getLength=function(){return m.length};this.draw=function(){q=b.set();n=l(b);q.push(n);D=M(b);q.push(D);if(C){f=e(b);q.push(f)}};this.measure=function(){this.draw();if(!p){var O=q.getBBox();var P={width:O.width,height:O.height,};if(B=="horizontal"){if(g!="middle"){w.addArea(g.substr(0,1).toUpperCase(),P)}else{if(I!="center"){w.addArea(I.substr(0,1).toUpperCase(),P)}}}else{if(I!="center"){w.addArea(I.substr(0,1).toUpperCase(),P)}else{if(g!="middle"){w.addArea(g.substr(0,1).toUpperCase(),P)}}}}};this.movePosition=function(){var T=w.getArea(),P=q.getBBox().width,S=q.getBBox().height,O=15,R,Q;if(C){S+=f.getBBox().height}R=c(T,P,O);Q=o(T,S,O);q.transform("t"+R+","+Q);if(C){S=Math.floor((J*0.8)/(L+N+j))*(L+N+j);n.attr({"clip-rect":[0,0,P,S]})}}}})();crownix.ns("crownix.chart.axis.Tick");(function(){var e=[1,2,2.5,5];var a=crownix.chart.axis.Tick;var d=function(i){return Math.log(i)/Math.log(10)};var c=function(i){if(i==0){return 0}else{return Math.floor(d(i))}};var f=function(l,k,i){var j;if(l){j=(i>0&&k<0)?i-k:Math.max(Math.abs(k),Math.abs(i))}else{j=Math.abs(i-k)}return j};var h=function(n,m){var l;for(var k=0,j=e.length-1;k<j;k++){if(n>e[k]*Math.pow(10,m)&&n<e[k+1]*Math.pow(10,m)){l=e[k+1]*Math.pow(10,m)}}if(!l){l=e[0]*Math.pow(10,m)*10}return l};var g=function(m,k,i,l,j){var n;if(j&&j==2&&Math.floor(k/l)*l+l<i){n=Math.floor(k)}else{if(i>0&&k>0){n=m?0:(parseInt(k/l)-1)*l}else{if(i<0&&k<0){n=(k%l==0)?k:Math.floor(k/l)*l}else{n=(k%l==0)?k:Math.floor(k/l)*l}}}return n};var b=function(o,m,j,p,q,n,s){var r=[],l=m;if(o=="linear"){for(var k=0;l<p;k++){l=j+q*k;if(n<0){l=parseFloat(l.toFixed(Math.abs(n)))}r.push(l)}}else{if(n<0){l=parseFloat(l.toFixed(Math.abs(n)))}r.push(l);if(s){for(var k=1;k<s;k++){l+=q;if(n<0){l=parseFloat(l.toFixed(Math.abs(n)))}r.push(l)}}else{while(l<=p){l+=q;if(n<0){l=parseFloat(l.toFixed(Math.abs(n)))}r.push(l)}}}return r};a.calculateTick=function(o,k,p,s,j){var q,r=[],m,s=s,j=j==0?undefined:j,n;var l=f(o=="auto",k,p);var i=l/(s?(s-1):8);if(o=="linear"){if(j){q=j;n=c(q)}else{n=c(i);q=h(i,n)}m=k}else{n=c(i);q=h(i,n);m=g(o=="auto",k,p,q,s)}r=b(o,m,k,p,q,n,s);return{min:k,max:p,minTick:r[0],maxTick:r[r.length-1],unit:q,ticks:r,tickAmount:r.length,}}})();crownix.ns("crownix.chart.axis.Axis");crownix.chart.axis.Axis=(function(){var b=crownix.chart.axis.Tick,d=crownix.chart.util.Path,f=crownix.chart.util.Util,c=crownix.chart.util.Format;var a=function(k,j){var l=k.set(),h;var i=k.text(0,0,j.text).textAttr({"font-size":j.font.size,"font-family":j.font.family,"text-anchor":"middle","font-weight":j.font.weight,fill:j.font.color,transform:["r",j.rotation,0,0].join(",")});l.push(i);h=l.getBBox();return{width:h.width,height:h.height,title:l}};var g=function(j,s,o){var r=j.set(),h=0,t=0,n;for(var m=0,k=s.length;m<k;m++){var l={value:s[m]};var q=c.convert(l,o);var p=j.text(0,0,q).attr({"font-size":"12pt","font-family":"Arial","text-anchor":"end",fill:"#171717",transform:["r",o.rotation,0,0].join(",")});r.push(p);n=p.getBBox();h=Math.max(n.width,h);t=Math.max(n.height,t)}return{width:h,height:t,labels:r}};var e=function(){this.seriesList=[];this.tick={};this.settings={};this.position="L";this.way=1;this.area={};this.gap;this.size;this.start;this.tickLength=10};e.prototype={constructor:crownix.chart.axis.Axis,setSeries:function(h){this.seriesList.push(h)},calculateTick:function(k){var j=this.getXYMin(),h=this.getXYMax(),l,k=k?k:this.tickAmount;if(k&&k<2){k=undefined}if(this.type=="linear"){var i;if(this.min!==undefined){j=this.min}if(this.max!==undefined){h=this.max}i=this.tickInterval;this.tick=b.calculateTick(this.type,j,h,k,i)}else{if(this.type=="none"){this.tick=b.calculateTick(this.type,j,h)}else{this.tick=b.calculateTick(this.type,j,h,k)}}},measure:function(j,h){this.area=g(j,this.tick.ticks,this.labels);if(this.title.enable&&this.title.text){var i=a(j,this.title);if(this.position=="T"||this.position=="B"){this.area.height+=i.height}else{this.area.width+=i.height}this.area.title=i.title;this.area.titleWidth=i.width;this.area.titleHeight=i.height}h.addArea(this.position,this.area);this.axisArea=JSON.parse(JSON.stringify(h.getArea()))},drawAxis:function(p,H,C){var E=H.getArea(),h=this.axisArea,A=this.area.width,u=this.area.height,L=this.position,G,K,w=10,l=5,z=0;titleHeight=0;if(this.title.enable&&this.title.text){var J=this.area.title,D=f.toAbsAngle(this.title.rotation),r,o,n;titleHeight=this.area.titleHeight;z=this.area.titleWidth;if(L=="T"||L=="B"){if(this.title.align=="left"){r=E.left+z/2}else{if(this.title.align=="right"){r=E.right-z/2}else{r=E.left+(E.right-E.left)/2}}}else{if(L=="R"){if(this.title.align=="left"){r=E.top+z/2}else{if(this.title.align=="right"){r=E.bottom-z/2}else{r=E.top+(E.bottom-E.top)/2}}}else{if(this.title.align=="left"){r=E.bottom-z/2}else{if(this.title.align=="right"){r=E.top+z/2}else{r=E.top+(E.bottom-E.top)/2}}}}if(L=="T"){o=r;n=h.top-(u+this.tickLength+5)+titleHeight/2}else{if(L=="B"){o=r;n=h.bottom+(u+this.tickLength+5)-titleHeight/2}else{if(L=="L"){o=h.left-(A+this.tickLength+5)+titleHeight/2;n=r;D-=90}else{if(L=="R"){o=h.right+(A+this.tickLength+5)-titleHeight/2;n=r;D+=90}}}}J.attr({x:o,y:n,transform:["r",D,o,n].join(",")})}switch(L){case"T":case"B":this.size=E.right-E.left;this.start=E.left;break;case"L":case"R":this.size=E.bottom-E.top;this.start=E.bottom;break}this.gap=this.size/(this.tick.ticks.length+(this.isAsixX()?0:-1));var s=this.area.labels,m=s.length,v=this.gap,t=this.isAsixX()?v/2:0,j=this.tickLength;self=this;s.attr({"text-anchor":"middle"});s.forEach(function(N,O){var P=N.getBBox(),Q=f.toAbsAngle(self.labels.rotation),M,R;if(L=="T"){M=E.left+v*O+t;R=h.top-j+P.y;if((Q>=20&&Q<=70)||(Q>=200&&Q<=250)){M+=P.x+5}else{if((Q>=110&&Q<=160)||(Q>=290&&Q<=340)){M-=P.x+5}else{R-=5}}}else{if(L=="B"){M=E.left+v*O+t;R=h.bottom+j-P.y;if((Q>=20&&Q<=70)||(Q>=200&&Q<=250)){M-=P.x+5}else{if((Q>=110&&Q<=160)||(Q>=290&&Q<=340)){M+=P.x+5}else{R+=5}}}else{if(L=="L"){M=h.left-j+P.x;R=E.bottom-v*O-t;if((Q>=20&&Q<=70)||(Q>=200&&Q<=250)){R+=P.y+5}else{if((Q>=110&&Q<=160)||(Q>=290&&Q<=340)){R-=P.y+5}else{M-=5}}}else{if(L=="R"){M=h.right+j-P.x;R=E.bottom-v*O-t;if((Q>=20&&Q<=70)||(Q>=200&&Q<=250)){R-=P.y+5}else{if((Q>=110&&Q<=160)||(Q>=290&&Q<=340)){R+=P.y+5}else{M+=5}}}}}}N.attr({x:M,y:R,transform:["r",self.labels.rotation,M,R].join(",")})});var I=E.width;var k=p.set();for(var B=0,F=this.tick.ticks.length;B<F;B++){if(C){k.push(this.renderGridLine(p,E,d,B))}var q=this.renderTick(p,E,h,d,B);k.push(q)}this.renderAxis(p,E,h);k.attr({stroke:"#C0D0E0","stroke-width":1})},renderAxis:function(l,k,i){var k=k,i=i,h=this.position,j;if(h=="T"){j=d.lineTo(l,k.left,i.top,k.right,i.top)}else{if(h=="B"){j=d.lineTo(l,k.left,i.bottom,k.right,i.bottom)}else{if(h=="L"){j=d.lineTo(l,i.left,k.top,i.left,k.bottom)}else{if(h=="R"){j=d.lineTo(l,i.right,k.top,i.right,k.bottom)}}}}j.attr(this.lineAttr)},getTicks:function(){return this.tick},getTickGap:function(){return this.gap},getPosition:function(){return this.position}};return e}());crownix.ns("crownix.chart.axis.AxisX");crownix.chart.axis.AxisX=(function(){var c=crownix.chart.axis.Axis;var b=crownix.chart.axis.Tick;var e=crownix.chart.util.Path;var h=function(i){};var d=function(j,i){var k=[["B","T"],["L","R"]];return k[j.inverted|0][i.opposite|0]};var a=function(m,l){if(m&&m.length>=l.getData().length){return m}else{var j=[];for(var k=0;k<l.getData().length;k++){if(m&&m[k]){j.push(m[k])}else{j.push(k)}}return j}};var g=function(j,i){var i=$.extend(true,{},crownix.chart.options.DEFAULT.axisX,i);this.settings=j;this.position=d(j,i);this.tick={ticks:i.data},this.labels=i.labels,this.seriesList=[];this.way=1;this.area={};this.lineAttr={stroke:i.lineColor,"stroke-width":i.lineWidth,};this.title=i.title;this.gap;this.size;this.start};var f=g.prototype=new c();f.constructor=crownix.chart.axis.AxisX;f.draw=function(l,k,j,i){this.drawAxis(l,k,j,i)};f.getCoord=function(j){return this.start+(this.gap*j+this.gap/2)*(this.settings.inverted?-1:1)};f.renderTick=function(n,m,j,l,k){if(this.position=="T"){ps=l.lineto(n,m.left+this.gap*k+this.gap/2,j.top,0,-this.tickLength)}else{if(this.position=="B"){ps=l.lineto(n,m.left+this.gap*k+this.gap/2,j.bottom,0,this.tickLength)}else{if(this.position=="L"){ps=l.lineto(n,j.left,m.bottom-this.gap*k-this.gap/2,-this.tickLength,0)}else{if(this.position=="R"){ps=l.lineto(n,j.right,m.bottom-this.gap*k-this.gap/2,this.tickLength,0)}}}}return ps};f.isAsixX=function(){return true};f.setSeries=function(i){this.seriesList.push(i);this.tick.ticks=a(this.tick.ticks,i)};return g}());crownix.ns("crownix.chart.axis.AxisY");crownix.chart.axis.AxisY=(function(){var c=crownix.chart.axis.Axis;var a=crownix.chart.axis.Tick;var d=crownix.chart.util.Path;var g=function(h){};var b=function(j,h){var k=[["B","T"],["L","R"]],i={B:["L","R"],L:["B","T"],T:["L","R"],R:["B","T"]};return i[k[j.inverted|0][j.axisX[0].opposite|0]][h.opposite|0]};var f=function(i,h){var h=$.extend(true,{},crownix.chart.options.DEFAULT.axisY,h);this.settings=i;this.seriesList=[];this.tick={};this.labels={format:h.labels.format,formatter:h.labels.formatter,rotation:h.labels.rotation};this.position=b(i,h);this.way=1;this.area={};this.lineAttr={stroke:h.lineColor,"stroke-width":h.lineWidth,};this.title=h.title;this.gap;this.size;this.start;this.xyMin=Number.MAX_VALUE;this.xyMax=-Number.MAX_VALUE;this.stackValue=[];this.accData=[];this.type=h.type;this.tickAmount=h.tickAmount;this.min=h.min;this.max=h.max;this.tickInterval=h.tickInterval};var e=f.prototype=new c();e.constructor=crownix.chart.axis.AxisY;e.draw=function(k,j,i,h){this.drawAxis(k,j,i,h)};e.getCoord=function(h){return this.start+this.size*(h-this.tick.minTick)/(this.tick.maxTick-this.tick.minTick)*(this.settings.inverted?1:-1)};e.renderGridLine=function(m,k,h,j){var l;if(this.position=="T"||this.position=="B"){l=d.lineto(m,k.left+this.gap*j,k.top,0,k.bottom-k.top)}else{if(this.position=="L"||this.position=="R"){l=d.lineto(m,k.left,k.bottom-this.gap*j,k.right-k.left,0)}}return l};e.renderTick=function(n,l,h,k,j){var m;if(this.position=="T"&&h.top==l.top){m=k.lineto(n,l.left+this.gap*j,l.top-10,0,10)}else{if(this.position=="B"&&h.bottom==l.bottom){m=k.lineto(n,l.left+this.gap*j,l.bottom+10,0,-10)}else{if(this.position=="L"&&h.left==l.left){m=k.lineto(n,l.left-10,l.bottom-this.gap*j,10,0)}else{if(this.position=="R"&&h.right==l.right){m=k.lineto(n,l.right+10,l.bottom-this.gap*j,-10,0)}}}}return m};e.isAsixX=function(){return false};e.setSeries=function(n){var m=n.getType(),l=n.isXYChart(),o=n.getData(),k=this.settings.common.column.type;if(l){if(m=="bar"){if(k=="stack"){for(var j=0,h=o.length;j<h;j++){if(o[j]>0){this.accData[j]=(this.accData[j]==undefined?0:this.accData[j])+o[j]}}this.xyMin=Math.min.apply(Math,this.accData);this.xyMax=Math.max.apply(Math,this.accData)}else{this.xyMin=Math.min(this.xyMin,n.getMinValue());this.xyMax=Math.max(this.xyMax,n.getMaxValue())}}else{this.xyMin=Math.min(this.xyMin,n.getMinValue());this.xyMax=Math.max(this.xyMax,n.getMaxValue())}}};e.getXYMin=function(){return this.xyMin};e.getXYMax=function(){return this.xyMax};e.getStackValue=function(h){return this.stackValue[h]};e.setStackValue=function(i,h){this.stackValue[h]=i};e.getAccValue=function(h){return this.accData[h]};return f}());crownix.ns("crownix.chart.Title");(function(){crownix.chart.Title=function(c,b){var a=crownix.chart.util.Path;var c=c,b=b;this.draw=function(p){if(!p.title.text){return}var d=b.getArea(),i=p.title.position,j=p.title.align,m,k,e,g,l=10;var o=c.text().textAttr({text:p.title.text,"font-family":p.title.font.family,"font-size":p.title.font.size,"font-weight":p.title.font.weight,fill:p.title.font.color,transform:["r",p.title.rotation,0,0].join(",")});g=o.getBBox();switch(i){case"top":default:k=d.top-g.y;break;case"middle":k=d.top+(d.bottom-d.top)/2;break;case"bottom":k=d.bottom-g.y2;break}switch(j){case"left":m=d.left-g.x;e="start";break;case"center":default:m=d.left+(d.right-d.left)/2;e="middle";break;case"right":m=d.right-g.x2;e="end";break}o.attr({x:m,y:k,transform:["r",p.title.rotation,m,k].join(",")});if(true){b.addArea(i,{width:g.width,height:g.height})}else{g=o.getBBox();var l=5,m=g.x-l,k=g.y-l,n=g.width+(l*2),f=g.height+(l*2);c.rect(m,k,n,f).attr({stroke:"green"})}}}})();crownix.ns("crownix.chart.type.Bar");crownix.chart.type.Bar=function(g,e,a){var d=crownix.chart.util.Path;var c=crownix.chart.util.Format;var b=function(i,n,l,m,j,h){var k=g.text(0,0,m).textAttr(h);if(j){i=i+k.getBBox().width*2/3*(l<=0?1:-1)}else{n=n+k.getBBox().height*2/3*(l>0?1:-1)}k.attr({x:i,y:n});return k};var f=function(m,j,h,i,k){var l=new crownix.chart.Tooltip(g),n;m.hover(function(){n=this.attr({opacity:1,}).glow({width:10,color:h});var q=this.getBBox(),p=j.font,o,s,r;if(i=="T"){o=q.x+q.width/2;if(k>q.y){r="T";s=q.y}else{r="B";s=q.y+q.height}}else{if(i=="B"){o=q.x+q.width/2;s=q.y;if(k>q.y){r="T";s=q.y}else{r="B";s=q.y+q.height}}else{if(i=="L"){s=q.y+q.height/2;if(k>q.x){r="L";o=q.x}else{r="R";o=q.x+q.width}}else{o=q.x;s=q.y+q.height/2;if(k>q.x){r="L";o=q.x}else{r="R";o=q.x+q.width}}}}l.show(o,s,this.data("tooltip"),{"font-family":p.family,"font-size":p.size,"font-weight":p.weight,fill:p.color},{opacity:0.8,stroke:h,fill:"#FFFFFF","stroke-width":1},r)},function(){this.attr({opacity:0.8,});l.hide();if(n){n.remove()}})};this.draw=function(A,u,k,j){A=$.extend(true,{},crownix.chart.options.BAR_DEFAULT,A);var M=e.getArea(),R=A.data,s=a.common.column.type,h=k.getTicks(),G=j.getTicks(),S=h.ticks,l=G.ticks,L=k.getTickGap(),H=A.color||u[0],q,n,z=g.set(),v,t,p,B,F,Q,P=e.getColumnCount(),O=e.getColumnIndex(),C=p=G.minTick>0?j.getCoord(G.minTick):j.getCoord(0),m=0;for(var K=0,J=R.length;K<J;K++){var F=parseFloat(R[K]);if(isNaN(F)||F<0){m=0;break}m+=F}g.setStart();for(var K=0,N=S.length;K<N;K++){if(R[K]==undefined){continue}var F=R[K]>G.maxTick?G.maxTick:R[K],B=L*2/3;if(s=="stack"&&F<0){continue}if(a.inverted){v=j.getCoord(F);t=k.getCoord(K);tStr="s0,1,0"+C+",0";if(s=="side"&&P>1){t=t-B/2+B/P/2+B/P*O;B=B/P*2/3}else{if(s=="stack"){Q=j.getStackValue(K)||0;F=Q+F;p=j.getCoord(Q);v=j.getCoord(F);j.setStackValue(F,K)}}bar=d.hBar(g,v,t,p,B)}else{v=k.getCoord(K);t=j.getCoord(F);tStr="s1,0,0,0"+C;if(s=="side"&&P>1){v=v-B/2+B/P/2+B/P*O;B=B/P*2/3}else{if(s=="stack"){Q=j.getStackValue(K)||0;F=Q+F;p=j.getCoord(Q);t=j.getCoord(F);j.setStackValue(F,K)}}bar=d.vBar(g,v,t,p,B)}bar.data("tooltip",R[K]).data("data",R[K]).data("x",v).data("y",t).attr({fill:H,stroke:"#C0D0E0",opacity:0.8,});if(A.animation){bar.transform(tStr)}if(A.dataLabels.enable){var o={value:A.data[K],name:A.name,percentValue:m==0?undefined:A.data[K]/((s=="stack"&&F>0)?j.getAccValue(K):m)*100};var D=A.dataLabels.font,I=c.convert(o,A.dataLabels);var r=b(v,t,A.data[K],I,a.inverted,{opacity:A.animation?0:0.8,"font-family":D.family,"font-size":D.size,"font-weight":D.weight,fill:D.color});z.push(r)}}e.addColumnIndex();var E=g.setFinish();if(!A.animation&&A.tooltip.enable){f(E,A.tooltip,H,k.getPosition(),C)}if(A.animation){E.animate({transform:""},1500,"<>",function(){if(A.tooltip.enable){f(E,A.tooltip,H,k.getPosition(),C)}if(A.dataLabels.enable){z.attr({opacity:0.8})}})}}};crownix.ns("crownix.chart.type.Line");crownix.chart.type.Line=function(g,f,a){var e=crownix.chart.util.Path;var d=crownix.chart.util.Format;var b=function(i,l,k,h){var j=g.text(0,0,k).textAttr(h);j.attr({x:i,y:l-j.getBBox().height*2/4-6,});return j};var c=function(m,h,n,k,l,i){var j;switch(l){case"diamond":j=e.diamond(m,h,n,k);break;case"square":j=e.square(m,h,n,k);break;case"triangle":j=e.triangle(m,h,n,k);break;case"triangle_down":j=e.triangle_down(m,h,n,k);break;default:j=m.circle(h,n,l=="no"?0:k)}return j.attr({stroke:"none",fill:i,opacity:1})};this.draw=function(l,O,k,j){l=$.extend(true,{},crownix.chart.options.LINE_DEFAULT,l);var F=f.getArea();var S=l.data;var h=k.getTicks();var M=j.getTicks();var C=h.ticks;var T=M.ticks;var m=k.getTickGap();var E=l.color||O[0];var q=l.symbol;var U=l.symbolSize;var t=g.set();var A=l.lineWidth;var H=l.step;var J=l.lineType;var I;var p=[];var w=0;for(var Q=0,D=S.length;Q<D;Q++){var N=parseFloat(S[Q]);if(isNaN(N)||N<0){w=0;break}w+=N}for(var Q=0,B=C.length;Q<B;Q++){var L,K,s,V;if(S[Q]==undefined){continue}if(a.inverted){L=j.getCoord(S[Q]);K=k.getCoord(Q)}else{L=k.getCoord(Q);K=j.getCoord(S[Q])}if(Q==0||(Q!=0&&S[Q-1]==undefined)){p.push("M")}else{if(J!=="spline"){p.push("L")}else{if(Q==1){p.push("R")}}}if(J==="step"&&Q!=B-1){p.push(L);p.push(K);p.push("L");if(a.inverted){s=j.getCoord(S[Q+1]);V=k.getCoord(Q+1);if(H=="right"){p.push(s);p.push(K)}else{if(H=="center"){p.push(L);p.push(V-(V-K)/2);p.push("L");p.push(s);p.push(V-(V-K)/2)}else{p.push(L);p.push(V)}}}else{s=k.getCoord(Q+1);V=j.getCoord(S[Q+1]);if(H=="right"){p.push(L);p.push(V)}else{if(H=="center"){p.push(s-(s-L)/2);p.push(K);p.push("L");p.push(s-(s-L)/2);p.push(V)}else{p.push(s);p.push(K)}}}}else{p.push(L);p.push(K)}}var o=g.path(p).attr({stroke:E,"stroke-width":A,opacity:0.8});if(l.animation){var u=$(o.node);u.css({"stroke-dasharray":"9999px","stroke-dashoffset":"9999px"});var z=Raphael.getTotalLength(p),r;u.animate({"stroke-dashoffset":(9999-z)+"px"},{duration:1500,complete:function(){if(l.dataLabels.enable){t.attr({opacity:0.8})}}})}if(l.tooltip.enable){I=new crownix.chart.Tooltip(g)}for(var Q=0,B=C.length;Q<B;Q++){if(S[Q]==undefined){continue}if(a.inverted){L=j.getCoord(S[Q]);K=k.getCoord(Q)}else{L=k.getCoord(Q);K=j.getCoord(S[Q])}var G=c(g,L,K,U,q,E).data("tooltip",S[Q]).data("data",S[Q]).attr({stroke:"none",fill:E,opacity:1,});if(l.tooltip.enable){G.hover(function(){r=o.glow({width:10,color:E});var i=l.tooltip.font;I.show(this.attr("cx"),this.attr("cy")-this.attr("r"),this.data("tooltip"),{"font-family":i.family,"font-size":i.size,"font-weight":i.weight,fill:i.color},{opacity:0.8,stroke:E,fill:"#FFFFFF","stroke-width":1})},function(){r.remove();I.hide()})}if(l.dataLabels.enable){var v={value:l.data[Q],name:l.name,percentValue:w==0?undefined:l.data[Q]/w*100};var R=l.dataLabels.font,n=d.convert(v,l.dataLabels);var P=b(L,K,n,{opacity:l.animation?0:0.8,"font-family":R.family,"font-size":R.size,"font-weight":R.weight,fill:R.color});t.push(P)}}}};crownix.ns("crownix.chart.type.Pie");crownix.chart.type.Pie=function(h,e,b){var d=crownix.chart.util.Path,c=crownix.chart.util.Format,g=crownix.chart.util.Util;var a=function(){var k={};var i={};var j=function(F,q,o,z,s,H,w){var u=F.label,E=g.toAbsAngle(F.centerAngle),v;if(u==undefined||u===""){return}var t=z*(90-s)/90,H=(E>90&&E<270)?0:(H-H*(90-s)/90),G=Math.PI/180,D=q+Math.cos((E-90)*G)*z,p=o+Math.sin((E-90)*G)*t-H,C=q+Math.cos((E-90)*G)*(z+10),n=o+Math.sin((E-90)*G)*(t+10)-H,B=q+Math.cos((E-90)*G)*(z+20),m=o+Math.sin((E-90)*G)*(t+20)-H,A,l;u=h.text(B+(E<180?10:-10),m,u).textAttr({"text-anchor":(E<180)?"start":"end","font-family":w.family,"font-size":w.size,"font-weight":w.weight,fill:w.color});v=u.getBBox();if(E<180&&i&&i.y2>v.y&&F.angle<180){m=m+i.y2-v.y;if(E<90){B=q+Math.sqrt(Math.pow(z+20,2)-Math.pow(m-o,2))}u.attr({x:B+10,y:m})}else{if(E>180&&k&&k.y2>v.y&&F.angle<180){m=m+k.y2-v.y;if(E>270){B=q-Math.sqrt(Math.pow(z+20,2)-Math.pow(m-o,2))}u.attr({x:B-10,y:m})}}if(isNaN(B)){console.log("[Warning]: could not create data label. "+F.label);u.remove();return}if(E<180){i=u.getBBox()}else{k=u.getBBox()}A=B+(E<180?5:-5);l=m;h.path(["M",D,p,"C",C,n,B,m,A,l,].join()).attr({stroke:F.color,"stroke-linejoin":"round"})};return j}();var f=function(i,l,k,j){x=Math.cos((l-90)*Math.PI/180)*k;y=Math.sin((l-90)*Math.PI/180)*k;y=y*(90-j)/90;return i.animate({transform:"t"+x+","+y},1000,"bounce")};this.draw=function(z,v){z=$.extend(true,{},crownix.chart.options.PIE_DEFAULT,z);var N=e.getArea(),S=z.data,v=z.colors||v,k=0,A,J=z.startAngle%360,m,l,E;var u=z.options3d,n=u.enable,p=0,T=0,R=z.innerPercent;if(n){p=u.alpha;T=u.depth;if(p<0){p=0}else{if(p>90){p=90}}if(T<0){T=0}}for(var L=0,K=S.length;L<K;L++){var F=parseFloat(S[L]["value"]);if(isNaN(F)||F<0){h.clear();h.text(10,30,"[Crownix Chart Error]\nPie charts can not draw a negative value.\ninvalid value: "+F).attr({"text-anchor":"start"});throw Error("[Crownix Chart] invalid value: "+F)}k+=F}if(z.center){m=z.center[0];l=z.center[1];if(typeof m=="string"&&typeof l=="string"&&m.charAt(m.length-1)=="%"&&l.charAt(l.length-1)=="%"){m=h.width*parseInt(m)/100;l=h.height*parseInt(l)/100}}else{m=N.left+(N.right-N.left)/2;l=N.top+(N.bottom-N.top)/2}if(z.radius){E=z.radius;if(typeof E=="string"&&E.charAt(E.length-1)=="%"){E=Math.min(h.width*parseInt(E)/100,h.height*parseInt(E)/100)}}else{E=Math.min((N.bottom-N.top)/2*0.8,(N.right-N.left)/2*0.8)}var t;var o;var j=null;var Q=true;var D=[];if(!z.clockwise){v=v.reverse();S=S.reverse()}for(L=0,K=S.length;L<K;L++){var F=S[L]["value"];var w=F/k*100;var M=360*F/k;if(M==0){M=0.1}else{if(M==360){M=359.9}}var s={value:F,name:S[L].name,percentValue:w};D.push({value:F,percentValue:w,label:c.convert(s,z.dataLabels),sliced:S[L].sliced,sliceOffset:(S[L].sliceOffset!=undefined)?S[L].sliceOffset:z.sliceOffset,startAngle:J,centerAngle:J+M/2,endAngle:J+M,angle:M,color:v.shift(),tooltip:(S[L].name!=undefined?S[L].name+": ":"")+F});J+=M}D.sort(function(W,Z){var X=g.toAbsAngle(W.startAngle),r=g.toAbsAngle(W.centerAngle),i=g.toAbsAngle(W.endAngle),U=g.toAbsAngle(Z.startAngle),Y=g.toAbsAngle(Z.centerAngle),V=g.toAbsAngle(Z.endAngle);if(W.angle>180){return 1}else{if(Z.angle>180){return -1}else{if(i-X<0){return -1}else{if(V-U<0){return 1}else{if(X<180&&i>180){return 1}else{if(U<180&&V>180){return -1}else{if(i==U){return(i<180)?-1:1}else{if(X==V){return(X<180)?1:-1}else{return(Math.abs(180-r)>Math.abs(180-Y))?-1:1}}}}}}}}});var q={};for(var L=0,K=D.length;L<K;L++){var P=D[L];A=d.pie3D(h,m,l,E,P.startAngle,P.endAngle,R,p,T);if(L==0){q=A}A.attr({"stroke-width":(p>0)?0.5:1,stroke:"#F2F3F4",fill:P.color,opacity:0.9,transform:z.animation?["s",0,0,m,l,"t",-(m+E),-(l+E),"r",-180,m,l,"r",-180,m,l]:""});if(n&&p>0&&L!=0&&P.angle>180){var C=g.toAbsAngle(P.startAngle);var O=g.toAbsAngle(P.endAngle);if(O<180&&C>180){A.insertBefore(q)}else{if(O<180){if(O>90){A.forEach(function(i){if(i.data("position")==="middle"){i.insertBefore(q)}})}A.forEach(function(i){if(i.data("position")==="end"){i.insertBefore(q)}})}else{if(C>180){if(C<270){A.forEach(function(i){if(i.data("position")==="middle"){i.insertBefore(q)}})}A.forEach(function(i){if(i.data("position")==="start"){i.insertBefore(q)}})}}}}A.animate({transform:""},z.animation?2000:0,"<>",function(i,r){return function(U){if(z.dataLabels.enable){a(r,m,l,E,p,T,z.dataLabels.font)}if(r.sliced){f(i,r.centerAngle,r.sliceOffset,p)}}}(A,P));if(z.slice){A.click(function(i,r){return function(){i.attr({opacity:0.9});if(t){t.remove()}if(j==i){i.animate({transform:""},1000,"bounce");j=null}else{if(j){j.animate({transform:""},1000,"bounce")}j=f(i,r.centerAngle,r.sliceOffset,p)}}}(A,P))}if(z.tooltip.enable){var o=new crownix.chart.Tooltip(h),B=z.tooltip.font,I=(g.browser.name=="Firefox")?"layerX":"offsetX",H=(g.browser.name=="Firefox")?"layerY":"offsetY",G=(g.browser.name==="IE"||g.browser.name==="Firefox")?2:2+b.chart.borderWidth;A.mouseover(function(i){return function(r){o.show(r[I]-G,r[H]-G,i.tooltip,{"font-family":B.family,"font-size":B.size,"font-weight":B.weight,fill:B.color},{opacity:0.8,stroke:i.color,fill:"#FFFFFF","stroke-width":1})}}(P)).mousemove(function(i){o.show(i[I]-G,i[H]-G)}).mouseout(function(i){o.hide()});A.hover(function(i){return function(r){t=i.attr({opacity:1,}).glow({width:10,color:this.attr("fill")})}}(A),function(i){return function(){i.attr({opacity:0.9,});t.remove()}}(A))}}}};crownix.ns("crownix.Chart");(function(){var h=crownix.chart.util.Path;var b=crownix.chart.Series;var e=crownix.chart.axis.AxisX;var a=crownix.chart.axis.AxisY;var g=crownix.chart.Layout;var d=crownix.chart.Title;var c=crownix.chart.Legend;crownix.Chart=function(i){this.element=(typeof i==="string")?document.getElementById(i):i;if(!this.element){throw Error("[ERROR] cannot found element: "+this.element)}this.axisXList=[];this.axisYList=[];this.seriesList=[];this.layout={};this.paper=Raphael(this.element)};var f=crownix.Chart.fn=crownix.Chart.prototype;f.build=function(k,s){var s=$.extend(true,{},crownix.chart.options.DEFAULT,s);if(s.chart.borderWidth>0){this.paper.canvas.style.border=s.chart.borderWidth+"px solid "+s.chart.borderColor}if(s.chart.borderRadius>0){this.paper.canvas.style.borderRadius=s.chart.borderRadius+"px"}if(s.chart.backgroundColor){this.paper.canvas.style.background=s.chart.backgroundColor}if(s.chart.backgroundImage){this.paper.image(s.chart.backgroundImage,0,0,this.paper.width,this.paper.height)}this.layout=new g(this.paper,s);this.title=new d(this.paper,this.layout);this.title.draw(s);if(s.legend.enable){this.legend=new c(this.paper,this.layout,s.legend)}if(Object.prototype.toString.call(s.axisX)!=="[object Array]"){s.axisX=[s.axisX]}if(Object.prototype.toString.call(s.axisY)!=="[object Array]"){s.axisY=[s.axisY]}for(var l=0,o=k.length;l<o;l++){var j=new b(k[l],s,this.layout,l);this.seriesList.push(j);this.layout.setSeries(j);if(j.isXYChart()){var q=j.getAxisXIndex();if(!this.axisXList[q]){this.axisXList[q]=new e(s,s.axisX[q])}this.axisXList[q].setSeries(j);j.setAxisX(this.axisXList[q]);q=j.getAxisX2Index();if(q){if(!this.axisXList[q]){this.axisXList[q]=new e(s,s.axisX[q])}this.axisXList[q].setSeries(j)}q=j.getAxisYIndex();if(!this.axisYList[q]){this.axisYList[q]=new a(s,s.axisY[q])}this.axisYList[q].setSeries(j);j.setAxisY(this.axisYList[q])}}if(this.legend){for(var l=0;l<this.seriesList.length;l++){this.legend.add(this.seriesList[l])}if(this.legend.getLength()>0){this.legend.measure();this.legend.movePosition()}}for(var l=0,o=this.axisXList.length;l<o;l++){var p=this.axisXList[l];if(p){p.measure(this.paper,this.layout)}}var r;for(var l=0,o=this.axisYList.length;l<o;l++){var n=this.axisYList[l];if(n){n.calculateTick(r);if(l==0){r=n.getTicks().tickAmount}n.measure(this.paper,this.layout)}}var m=false;for(var l=0,o=this.axisYList.length;l<o;l++){var n=this.axisYList[l];if(n){n.draw(this.paper,this.layout,!m);m=true}}for(var l=0,o=this.axisXList.length;l<o;l++){var p=this.axisXList[l];if(p){p.draw(this.paper,this.layout,false)}}for(var l=0,o=this.seriesList.length;l<o;l++){var j=this.seriesList[l];j.draw(this.paper,this.layout)}};f.clear=function(){this.paper.clear();this.paper.remove()}})();Raphael.el.textAttr=function(){var a=undefined;return function(b){if(b.hasOwnProperty("font-size")){var c=b["font-size"];if(a===undefined){var d=$("<div>").css({width:"1in",height:"1in",display:"none"}).appendTo("body");a=d.width();d.remove();if(window.console){console.log("[Crownix Chart] detect "+a+" device DPI.")}}if(typeof c==="string"&&c.indexOf("pt",c.length-2)!==-1){b["font-size"]=parseInt(c,10)/72*a}}return this.attr(b)}}();
/*!
 * numeral.js
 * version : 1.5.3
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */
(function(){function N(b){this._value=b}function M(i,h,n,m){var l,k,j=Math.pow(10,h);return k=(n(i*j)/j).toFixed(h),m&&(l=new RegExp("0{1,"+m+"}$"),k=k.replace(l,"")),k}function L(f,e,h){var g;return g=e.indexOf("$")>-1?J(f,e,h):e.indexOf("%")>-1?I(f,e,h):e.indexOf(":")>-1?H(f,e):F(f._value,e,h)}function K(O,s){var r,q,p,o,n,m=s,l=["KB","MB","GB","TB","PB","EB","ZB","YB"],h=!1;if(s.indexOf(":")>-1){O._value=G(s)}else{if(s===v){O._value=0}else{for("."!==z[w].delimiters.decimal&&(s=s.replace(/\./g,"").replace(z[w].delimiters.decimal,".")),r=new RegExp("[^a-zA-Z]"+z[w].abbreviations.thousand+"(?:\\)|(\\"+z[w].currency.symbol+")?(?:\\))?)?$"),q=new RegExp("[^a-zA-Z]"+z[w].abbreviations.million+"(?:\\)|(\\"+z[w].currency.symbol+")?(?:\\))?)?$"),p=new RegExp("[^a-zA-Z]"+z[w].abbreviations.billion+"(?:\\)|(\\"+z[w].currency.symbol+")?(?:\\))?)?$"),o=new RegExp("[^a-zA-Z]"+z[w].abbreviations.trillion+"(?:\\)|(\\"+z[w].currency.symbol+")?(?:\\))?)?$"),n=0;n<=l.length&&!(h=s.indexOf(l[n])>-1?Math.pow(1024,n+1):!1);n++){}O._value=(h?h:1)*(m.match(r)?Math.pow(10,3):1)*(m.match(q)?Math.pow(10,6):1)*(m.match(p)?Math.pow(10,9):1)*(m.match(o)?Math.pow(10,12):1)*(s.indexOf("%")>-1?0.01:1)*((s.split("-").length+Math.min(s.split("(").length-1,s.split(")").length-1))%2?1:-1)*Number(s.replace(/[^0-9\.]+/g,"")),O._value=h?Math.ceil(O._value):O._value}}return O._value}function J(r,q,p){var o,n,m=q.indexOf("$"),l=q.indexOf("("),k=q.indexOf("-"),i="";return q.indexOf(" $")>-1?(i=" ",q=q.replace(" $","")):q.indexOf("$ ")>-1?(i=" ",q=q.replace("$ ","")):q=q.replace("$",""),n=F(r._value,q,p),1>=m?n.indexOf("(")>-1||n.indexOf("-")>-1?(n=n.split(""),o=1,(l>m||k>m)&&(o=0),n.splice(o,0,z[w].currency.symbol+i),n=n.join("")):n=z[w].currency.symbol+i+n:n.indexOf(")")>-1?(n=n.split(""),n.splice(-1,0,i+z[w].currency.symbol),n=n.join("")):n=n+i+z[w].currency.symbol,n}function I(h,g,l){var k,j="",i=100*h._value;return g.indexOf(" %")>-1?(j=" ",g=g.replace(" %","")):g=g.replace("%",""),k=F(i,g,l),k.indexOf(")")>-1?(k=k.split(""),k.splice(-1,0,j+"%"),k=k.join("")):k=k+j+"%",k}function H(f){var e=Math.floor(f._value/60/60),h=Math.floor((f._value-60*e*60)/60),g=Math.round(f._value-60*e*60-60*h);return e+":"+(10>h?"0"+h:h)+":"+(10>g?"0"+g:g)}function G(e){var d=e.split(":"),f=0;return 3===d.length?(f+=60*Number(d[0])*60,f+=60*Number(d[1]),f+=Number(d[2])):2===d.length&&(f+=60*Number(d[0]),f+=Number(d[1])),Number(f)}function F(ah,ag,af){var ae,ad,ac,ab,aa,Z,Y=!1,X=!1,W=!1,V="",S=!1,R=!1,Q=!1,P=!1,O=!1,q="",p="",o=Math.abs(ah),b=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],U="",T=!1;if(0===ah&&null!==v){return v}if(ag.indexOf("(")>-1?(Y=!0,ag=ag.slice(1,-1)):ag.indexOf("+")>-1&&(X=!0,ag=ag.replace(/\+/g,"")),ag.indexOf("a")>-1&&(S=ag.indexOf("aK")>=0,R=ag.indexOf("aM")>=0,Q=ag.indexOf("aB")>=0,P=ag.indexOf("aT")>=0,O=S||R||Q||P,ag.indexOf(" a")>-1?(V=" ",ag=ag.replace(" a","")):ag=ag.replace("a",""),o>=Math.pow(10,12)&&!O||P?(V+=z[w].abbreviations.trillion,ah/=Math.pow(10,12)):o<Math.pow(10,12)&&o>=Math.pow(10,9)&&!O||Q?(V+=z[w].abbreviations.billion,ah/=Math.pow(10,9)):o<Math.pow(10,9)&&o>=Math.pow(10,6)&&!O||R?(V+=z[w].abbreviations.million,ah/=Math.pow(10,6)):(o<Math.pow(10,6)&&o>=Math.pow(10,3)&&!O||S)&&(V+=z[w].abbreviations.thousand,ah/=Math.pow(10,3))),ag.indexOf("b")>-1){for(ag.indexOf(" b")>-1?(q=" ",ag=ag.replace(" b","")):ag=ag.replace("b",""),ac=0;ac<=b.length;ac++){if(ae=Math.pow(1024,ac),ad=Math.pow(1024,ac+1),ah>=ae&&ad>ah){q+=b[ac],ae>0&&(ah/=ae);break}}}return ag.indexOf("o")>-1&&(ag.indexOf(" o")>-1?(p=" ",ag=ag.replace(" o","")):ag=ag.replace("o",""),p+=z[w].ordinal(ah)),ag.indexOf("[.]")>-1&&(W=!0,ag=ag.replace("[.]",".")),ab=ah.toString().split(".")[0],aa=ag.split(".")[1],Z=ag.indexOf(","),aa?(aa.indexOf("[")>-1?(aa=aa.replace("]",""),aa=aa.split("["),U=M(ah,aa[0].length+aa[1].length,af,aa[1].length)):U=M(ah,aa.length,af),ab=U.split(".")[0],U=U.split(".")[1].length?z[w].delimiters.decimal+U.split(".")[1]:"",W&&0===Number(U.slice(1))&&(U="")):ab=M(ah,null,af),ab.indexOf("-")>-1&&(ab=ab.slice(1),T=!0),Z>-1&&(ab=ab.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+z[w].delimiters.thousands)),0===ag.indexOf(".")&&(ab=""),(Y&&T?"(":"")+(!Y&&T?"-":"")+(!T&&X?"+":"")+ab+U+(p?p:"")+(V?V:"")+(q?q:"")+(Y&&T?")":"")}function E(d,c){z[d]=c}function D(d){var c=d.toString().split(".");return c.length<2?1:Math.pow(10,c[1].length)}function C(){var b=Array.prototype.slice.call(arguments);return b.reduce(function(f,e){var h=D(f),g=D(e);return h>g?h:g},-1/0)}var B,A="1.5.3",z={},w="en",v=null,u="0,0",t="undefined"!=typeof module&&module.exports;B=function(a){return B.isNumeral(a)?a=a.value():0===a||"undefined"==typeof a?a=0:Number(a)||(a=B.fn.unformat(a)),new N(Number(a))},B.version=A,B.isNumeral=function(a){return a instanceof N},B.language=function(d,c){if(!d){return w}if(d&&!c){if(!z[d]){throw new Error("Unknown language : "+d)}w=d}return(c||!z[d])&&E(d,c),B},B.languageData=function(b){if(!b){return z[w]}if(!z[b]){throw new Error("Unknown language : "+b)}return z[b]},B.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(d){var c=d%10;return 1===~~(d%100/10)?"th":1===c?"st":2===c?"nd":3===c?"rd":"th"},currency:{symbol:"$"}}),B.zeroFormat=function(b){v="string"==typeof b?b:null},B.defaultFormat=function(b){u="string"==typeof b?b:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(h,g){if(null===this||"undefined"==typeof this){throw new TypeError("Array.prototype.reduce called on null or undefined")}if("function"!=typeof h){throw new TypeError(h+" is not a function")}var l,k,j=this.length>>>0,i=!1;for(1<arguments.length&&(k=g,i=!0),l=0;j>l;++l){this.hasOwnProperty(l)&&(i?k=h(k,this[l],l,this):(k=this[l],i=!0))}if(!i){throw new TypeError("Reduce of empty array with no initial value")}return k}),B.fn=N.prototype={clone:function(){return B(this)},format:function(d,c){return L(this,d?d:u,void 0!==c?c:Math.round)},unformat:function(b){return"[object Number]"===Object.prototype.toString.call(b)?b:K(this,b?b:u)},value:function(){return this._value},valueOf:function(){return this._value},set:function(b){return this._value=Number(b),this},add:function(e){function d(g,c){return g+f*c}var f=C.call(null,this._value,e);return this._value=[this._value,e].reduce(d,0)/f,this},subtract:function(e){function d(g,c){return g-f*c}var f=C.call(null,this._value,e);return this._value=[e].reduce(d,this._value*f)/f,this},multiply:function(d){function c(f,e){var g=C(f,e);return f*g*e*g/(g*g)}return this._value=[this._value,d].reduce(c,1),this},divide:function(d){function c(f,e){var g=C(f,e);return f*g/(e*g)}return this._value=[this._value,d].reduce(c),this},difference:function(b){return Math.abs(B(this._value).subtract(b).value())}},t&&(module.exports=B),"undefined"==typeof ender&&(this.numeral=B),"function"==typeof define&&define.amd&&define([],function(){return B})}).call(this);